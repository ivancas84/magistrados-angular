<mat-card>
  <mat-card-header>
    <mat-card-title>Importes 
      <core-label [entityName]="'organo'" [id]="display.getParam('organo')"></core-label> {{display.getParam('periodo') | toDate | date:"M/y"}} 
      <button mat-mini-fab color="accent" (click)="edit()"><mat-icon>edit</mat-icon></button>
      <button mat-mini-fab color="primary" (click)="copyContent()"><mat-icon>content_copy</mat-icon></button>
      <button mat-mini-fab color="primary" (click)="printContent()"><mat-icon>print</mat-icon></button>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content #content>
    <table mat-table [dataSource]="dataSource" matSort matSortDisableClear (matSortChange)="onChangeSort($event)" class="mat-elevation-z8">
      <ng-container matColumnDef="nombre">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Departamento </th>
        <td mat-cell *matCellDef="let row">
          <a routerLink="/importe-afiliacion-show" [queryParams]="{'periodo.ym':display.getParam('periodo'),'afi_per-organo':display.getParam('organo'),'afi_per-departamento_judicial':row.id}">{{row.nombre}}</a>
        </td>
        <td mat-footer-cell *matFooterCellDef> TOTAL </td>
      </ng-container>

      <ng-container matColumnDef="afiliaciones">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Colegiados </th>
        <td mat-cell *matCellDef="let row"> {{row.afiliaciones}} </td>
        <td mat-footer-cell *matFooterCellDef> {{footer.afiliaciones}} </td>
      </ng-container>

      <ng-container matColumnDef="importe">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Importe </th>
        <td mat-cell *matCellDef="let row"> {{row.importe}} </td>
        <td mat-footer-cell *matFooterCellDef> {{footer.importe}} </td>
      </ng-container>

      <ng-container matColumnDef="cuota_asociativa">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> 15% </th>
        <td mat-cell *matCellDef="let row"> {{row.cuota_asociativa}} </td>
        <td mat-footer-cell *matFooterCellDef> {{footer.cuota_asociativa}} </td>
      </ng-container>

      <ng-container matColumnDef="fam">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> FAM </th>
        <td mat-cell *matCellDef="let row"> {{row.fam}} </td>
        <td mat-footer-cell *matFooterCellDef> {{footer.fam}} </td>
      </ng-container>

      <ng-container matColumnDef="total_deduccion">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Total deducción </th>
        <td mat-cell *matCellDef="let row"> {{row.total_deduccion}} </td> 
        <td mat-footer-cell *matFooterCellDef> {{footer.total_deduccion}} </td>
      </ng-container>

      <ng-container matColumnDef="total_pagar">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Total a pagar </th>
        <td mat-cell *matCellDef="let row"> {{row.total_pagar}} </td>
        <td mat-footer-cell *matFooterCellDef> {{footer.total_pagar}} </td>
      </ng-container>

      <ng-container matColumnDef="viatico">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Viático </th>
        <td mat-cell *matCellDef="let row"> 
          <core-input-value *ngIf="editViatico"
            [fieldControl]="viatico" 
            [entityName]="'viatico'" 
            [value]="row.viatico"
            [params]="{
              organo:display.getParam('organo'),
              periodo:display.getParam('periodo'),
              departamento_judicial:row.id
            }"
          ></core-input-value>
          <span *ngIf="!editViatico">{{row.viatico}}</span>
        </td>
        <td mat-footer-cell *matFooterCellDef> {{footer.viatico}} </td>
      </ng-container>

      <ng-container matColumnDef="total">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Total </th>
        <td mat-cell *matCellDef="let row"> {{row.total}} </td>
        <td mat-footer-cell *matFooterCellDef> {{footer.total}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr>
    </table>  
     
    
  </mat-card-content>
</mat-card>
